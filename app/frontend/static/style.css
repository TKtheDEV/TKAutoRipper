/* =========================
   TKAutoRipper UI System v1
   ========================= */

/* ---- Theme Tokens ---- */
:root {
  --bg: #1e1e1e;
  --text: #f5f5f5;
  --muted: #bdbdbd;
  --surface: #2c2c2c;
  --surface-2: #242424;
  --border: #444;
  --hover: #363636;
  --focus: #4caf50;

  --green: #4caf50;
  --red: #e53935;
  --orange: #ffa500;
  --blue: #2196f3;
  --yellow: #ffb300;

  --code-bg: #1a1a1a;
}
html.light-mode {
  --bg: #f5f7fa; --text:#333; --muted:#666; --surface:#fff; --surface-2:#f0f2f5;
  --border:#ddd; --hover:#f3f5f8; --focus:#4caf50; --code-bg:#111;
}

/* ---- Base ---- */
*{box-sizing:border-box}
html,body{margin:0;padding:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,sans-serif;background:var(--bg);color:var(--text)}
a{color:inherit;text-decoration:none}
img{max-width:100%;display:block}
.hidden{display:none!important}

/* ---- Header ---- */
.header-bar{background:#2c2c2c;color:#fff;display:flex;justify-content:space-between;align-items:center;padding:.75rem 1.25rem;position:fixed;top:0;left:0;right:0;z-index:1000}
.header-bar h1{margin:0;font-size:1.25rem}
.title-left{display:flex;align-items:center;gap:.6rem}
.title-right{display:flex;align-items:center;gap:1rem}
.title-right a,.title-right .theme-symbol{font-size:1.3rem;cursor:pointer;transition:transform .2s}
.title-right a:hover,.title-right .theme-symbol:hover{transform:scale(1.12)}
.content{padding:1rem;padding-top:4.5rem}

/* ---- Cards/Tiles ---- */
.card{background:var(--surface);border:1px solid var(--border);border-radius:8px;padding:.9rem}
/* Softer hover: slight surface tint, no green outline */
.card h2,.card h3{margin:0 0 .6rem}
.tile{all:unset;display:block;background:var(--surface);border:1px solid var(--border);border-radius:8px;padding:.9rem}

/* ---- Grid helpers ---- */
.grid{display:grid;gap:1rem}
.grid--auto{grid-template-columns:repeat(auto-fill,minmax(300px,1fr))}
.grid--2{grid-template-columns:1fr 1fr}
@media (max-width:900px){.grid--2{grid-template-columns:1fr}}

/* ---- Job page layout ---- */
body[data-job-id] .job-layout{display:grid;grid-template-columns:minmax(360px,480px) 1fr;gap:1rem;align-items:start}
@media(max-width:900px){body[data-job-id] .job-layout{grid-template-columns:1fr}}
.sticky{position:sticky;top:4.5rem;align-self:start}

/* ---- Inputs ---- */
.input,.select,textarea{width:100%;padding:8px 10px;border-radius:6px;border:1px solid var(--border);background:var(--surface-2);color:var(--text);font-size:.95rem}
.input:focus,.select:focus,textarea:focus{outline:none;border-color:var(--focus);box-shadow:0 0 0 2px color-mix(in srgb,var(--focus) 30%,transparent)}
.input-row{display:flex;gap:.6rem;align-items:center;flex-wrap:wrap}
label{display:inline-block;margin:.2rem 0;color:var(--muted);font-size:.9rem}

/* ---- Buttons ---- */
.btn{display:inline-flex;align-items:center;justify-content:center;gap:.4rem;padding:8px 12px;font-size:.9rem;border-radius:6px;cursor:pointer;user-select:none;border:1px solid var(--border);background:transparent;color:var(--text);transition:background .15s,color .15s,border-color .15s,transform .05s}
.btn:active{transform:translateY(1px)}
.btn[disabled],.btn:disabled{opacity:.5;cursor:not-allowed}
.btn--primary{border-color:var(--green);color:var(--green)}
.btn--primary:hover{background:var(--green);color:#fff}
.btn--danger{border-color:var(--red);color:var(--red)}
.btn--danger:hover{background:var(--red);color:#fff}
.btn--ghost{border-color:var(--border);color:var(--text)}
.btn--ghost:hover{background:var(--hover)}
.btn-row{display:flex;gap:.6rem;flex-wrap:wrap}

/* ---- Toasts ---- */
#toast{position:fixed;top:4.2rem;right:.5rem;z-index:9999;display:flex;flex-direction:column;gap:.6rem}
.toast-msg{background:var(--surface);color:var(--text);padding:.75rem 1rem;border-radius:8px;border:1px solid var(--border);box-shadow:0 6px 30px rgba(0,0,0,.35)}
.toast-msg.success{border-left:5px solid var(--green)}
.toast-msg.error{border-left:5px solid var(--red)}

/* ---- Badges ---- */
.badge{padding:2px 6px;border-radius:4px;font-size:.8rem}
.badge--queued{background:#757575}
.badge--running{background:var(--orange)}
.badge--finished{background:var(--green)}
.badge--failed{background:var(--red)}

/* ---- Progress bars ---- */
.progress{width:100%;height:14px;border-radius:6px;appearance:none;background:#3a3a3a}
.progress::-webkit-progress-bar{background:#3a3a3a;border-radius:6px}
.progress::-webkit-progress-value{background:var(--green);border-radius:6px}
.progress--blue::-webkit-progress-value{background:var(--blue)}
.progress--yellow::-webkit-progress-value{background:var(--yellow)}
.progress-label{display:flex;justify-content:space-between;align-items:center;margin:.3rem 0 .25rem}
.progress-value{opacity:.9}

/* ---- Tables ---- */
.table{width:100%;border-collapse:collapse}
.table th,.table td{border-bottom:1px solid var(--border);padding:.5rem .25rem;text-align:left}

/* ---- Log ---- */
.log-box{max-height:70vh;overflow:auto;white-space:pre;max-width:100%;background:var(--code-bg);color:#eaeaea;padding:1rem;border-radius:8px;border:1px solid var(--border);font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,"Liberation Mono",monospace;font-size:.9rem}

/* ---- Dropdown (OMDb) ---- */
.dropdown{position:absolute;z-index:20;top:100%;left:0;right:0;background:var(--surface);border:1px solid var(--border);border-radius:8px;padding:.25rem 0;max-height:240px;overflow-y:auto;list-style:none;margin:.25rem 0 0 0}
.dropdown li{padding:.5rem .75rem;cursor:pointer}
.dropdown li:hover{background:var(--hover)}



/* === iOS toggle switch === */
.switch { position: relative; display: inline-block; width: 46px; height: 26px; }
.switch input { display: none; }
.switch .slider {
  position: absolute; cursor: pointer; inset: 0;
  background: #9e9e9e; border-radius: 999px; transition: background .2s ease;
  box-shadow: inset 0 1px 2px rgba(0,0,0,.25);
}
.switch .slider::before {
  content: ""; position: absolute; height: 22px; width: 22px; left: 2px; top: 2px;
  background: #fff; border-radius: 50%; transition: transform .2s ease, box-shadow .2s ease;
  box-shadow: 0 1px 2px rgba(0,0,0,.3);
}
.switch input:checked + .slider { background: var(--green); }
.switch input:checked + .slider::before { transform: translateX(20px); }

html.light-mode .switch .slider { background: #cfcfcf; }
html.light-mode .switch input:checked + .slider { background: var(--green); }

/* --- Drive tile: keep eject at bottom-left --- */
.card--drive { position: relative; padding-bottom: 3.25rem; } /* room for the pinned row */
.card--drive .eject-row {
  position: absolute;
  left: .75rem;
  bottom: .75rem;
}
.card--drive-overview .counts{display:grid;gap:.25rem;margin:.35rem 0 .75rem}
.card--drive-overview .count-row{display:grid;grid-template-columns:1fr auto auto;align-items:center;gap:.35rem;font-size:.95rem}
.card--drive-overview .count-row strong.ok{color:var(--green)}
.card--drive-overview .count-row strong.bad{color:var(--red)}
.card--drive-overview .muted{color:var(--muted);font-size:.9rem;margin-bottom:.5rem}
.card--drive-overview .btn-col{display:flex;flex-direction:column;gap:.4rem;margin-top:.4rem}

#drives.drives-grid{display:grid;grid-template-columns:minmax(240px,320px) minmax(0,1fr);gap:1rem;align-items:start}
#drives.drives-grid{grid-template-columns:repeat(auto-fill,minmax(300px,1fr));align-items:start}
.card--drive-overview{grid-row:span 2}
@media(max-width:900px){
  #drives.drives-grid{grid-template-columns:repeat(auto-fill,minmax(260px,1fr))}
  .card--drive-overview{grid-row:auto}
}

/* Job details layout: strict 50/50 on desktop, stack on mobile */
body[data-job-id] .job-layout {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 1rem;
  align-items: start;
}
@media (max-width: 900px) {
  body[data-job-id] .job-layout { grid-template-columns: 1fr; }
}

/* Left column stacks: Job Info + Output + OMDb */
body[data-job-id] .left-col { display: flex; flex-direction: column; gap: 1rem; }

/* Keep log from dictating layout */
body[data-job-id] .log-card #log-window {
  max-height: 70vh;
  min-height: 50vh;        /* feels nicer; adjust if you want */
  overflow: auto;
}


/* Force true 50/50 columns and allow shrinking */
body[data-job-id] .job-layout {
  display: grid;
    grid-template-columns: minmax(0, 0.7fr) minmax(0, 1.3fr); /* <-- key fix */
  gap: 1rem;
  align-items: start;
}

/* Let grid items actually shrink (pre/log wonâ€™t push layout) */
body[data-job-id] .left-col,
body[data-job-id] .log-card {
  min-width: 0; /* <-- critical for overflow content like <pre> */
}

/* Keep log scrolling inside the card instead of growing the grid */
body[data-job-id] .log-card #log-window {
  max-height: 70vh;
  min-height: 50vh;
  overflow: auto;       /* both axes scroll as needed */
  white-space: pre;     /* keep columns, don't wrap */
  width: 100%;
}
